// Google Client ID
const clientId = "238946351047-i110lkfs5p8dhl6gg5k60ghtfanioufj.apps.googleusercontent.com";

// Handle login response
function handleCredentialResponse(response) {
    // Decode JWT token to get user info
    const base64Url = response.credential.split('.')[1];
    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
    const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
    }).join(''));

    const user = JSON.parse(jsonPayload);
    console.log("User info:", user);

    // Display user info on page
    document.getElementById("user-info").innerText = `Signed in as: ${user.name} (${user.email})`;
}

// Initialize Google Identity Services
window.onload = function() {
    google.accounts.id.initialize({
        client_id: clientId,
        callback: handleCredentialResponse
    });

    // Trigger Google Sign-In popup when Customer button is clicked
    document.getElementById("customerBtn").addEventListener("click", function() {
        google.accounts.id.prompt(); // Shows the popup
    });
};
